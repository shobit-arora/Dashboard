<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Arora Family Calendar</title>

<!-- Reduce indexing (note: does NOT make the site private) -->
<meta name="robots" content="noindex,nofollow,noarchive,nosnippet,max-image-preview:none">
<meta name="googlebot" content="noindex,nofollow,noarchive,nosnippet,max-image-preview:none">

<!-- Warm-but-contemporary title font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,600;9..144,800&display=swap" rel="stylesheet">

<style>
html,body{
  margin:0; height:100%;
  background:#0b0f17; color:#fff;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
}
.wrap{
  height:100%;
  padding:16px;
  box-sizing:border-box;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.header{
  background:#111827;
  border-radius:16px;
  padding:14px 16px;
}
.titleRow{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:12px;
}
.title{
  text-align:center;
  font-size:30px;
  font-weight:800;
  font-family:"Fraunces", system-ui, -apple-system, Segoe UI, Roboto, Arial;
  letter-spacing:.2px;
}
.titleIcon{
  width:40px;
  height:40px;
  opacity:.95;
}
.titleIcon img{
  width:100%;
  height:100%;
  object-fit:contain;
  filter:brightness(1.1);
}
.dt{
  display:flex;
  justify-content:space-between;
  font-size:22px;
  font-weight:700;
  margin-top:6px;
}
.main{
  flex:1;
  display:grid;
  grid-template-columns:34% 66%;
  gap:12px;
  min-height:0;
}
.left,.right{min-height:0;}
.card{
  background:#111827;
  border-radius:16px;
  padding:12px;
  margin-bottom:12px;
}
.photoBox{
  height:260px;
  background:#000;
  border-radius:14px;
  overflow:hidden;
  position:relative;
}
.photoBox img{
  width:100%; height:100%;
  object-fit:cover;
}
.calendar{
  height:100%;
  border-radius:16px;
  overflow:hidden;
}
.calendar iframe{
  width:100%; height:100%;
  border:0;
  filter:invert(1) hue-rotate(180deg) contrast(1.05);
}

/* Weather */
.wxNow{
  display:flex; align-items:center; gap:12px;
  margin-top:8px;
}
.wxIcon{ 
  font-size:44px;
  line-height:1;
}
.wxTemp{ font-size:28px; font-weight:800; }
.wxCond{ font-size:14px; opacity:.85; }
.wxRange{ font-size:13px; opacity:.85; margin-top:4px; }
.forecastRow{
  margin-top:10px;
  display:flex;
  gap:10px;
}
.dayCard{
  flex:1;
  background:#0f172a;
  border-radius:12px;
  padding:10px;
  display:flex;
  flex-direction:column;
  gap:6px;
  align-items:center;
  min-width:0;
}
.dow{ font-weight:800; font-size:13px; opacity:.95; }
.dayIcon{ font-size:28px; line-height:1; }
.temps{ font-size:13px; opacity:.9; white-space:nowrap; }
.smallCond{ font-size:11px; opacity:.75; text-align:center; }
</style>
</head>

<body>
<div class="wrap">

  <div class="header">
    <div class="titleRow">
      <div class="titleIcon">
        <img src="Om 1.jpg" alt="Om" id="omIconLeft">
      </div>
      <div class="title">Arora Family Calendar</div>
      <div class="titleIcon">
        <img src="Om 1.jpg" alt="Om" id="omIconRight">
      </div>
    </div>
    <div class="dt">
      <div id="time"></div>
      <div id="date"></div>
    </div>
  </div>

  <div class="main">
    <div class="left">

      <!-- Family Photo -->
      <div class="card photoBox">
        <img src="Family 1.jpg" alt="Arora Family" style="width:100%;height:100%;object-fit:cover;">
      </div>

      <div class="card" id="weather">
        <strong>Houston Weather - Today</strong>
        <div class="wxNow">
          <div id="wxIcon" class="wxIcon"></div>
          <div>
            <div class="wxTemp" id="wxTemp">--¬∞F</div>
            <div class="wxCond" id="wxCond">Loading‚Ä¶</div>
            <div class="wxRange" id="wxRange"></div>
          </div>
        </div>
        <div style="margin-top:12px;font-size:13px;font-weight:700;opacity:.9;">5-Day Forecast</div>
        <div class="forecastRow" id="forecast"></div>
      </div>
    </div>

    <div class="right calendar">
      <iframe
        src="https://calendar.google.com/calendar/embed?src=shashilandshobit%40gmail.com&ctz=America%2FChicago&mode=MONTH&showTitle=0&showTabs=0">
      </iframe>
    </div>
  </div>
</div>

<!-- Version timestamp -->
<div style="position:fixed;bottom:4px;right:8px;font-size:9px;opacity:.25;color:#666;">
  v2025-01-25 1:30 PM
</div>

<script>
/* CLOCK */
function tick(){
  const now=new Date();
  time.textContent=now.toLocaleTimeString([], {hour:'numeric',minute:'2-digit'});
  date.textContent=now.toLocaleDateString([], {weekday:'long',month:'short',day:'numeric'});
}
setInterval(tick,1000); tick();

/* === WEATHER (Using National Weather Service API + Weather Emojis) === */
// ZIP 77055 coordinates
const LAT = 29.7853;
const LON = -95.5204;

// Weather condition to emoji mapping
function getWeatherEmoji(text) {
  const t = text.toLowerCase();
  
  // Thunderstorms
  if(t.includes('thunder') || t.includes('t-storm')) return '‚õàÔ∏è';
  
  // Rain variations
  if(t.includes('rain') && t.includes('heavy')) return 'üåßÔ∏è';
  if(t.includes('rain') || t.includes('shower')) return 'üå¶Ô∏è';
  if(t.includes('drizzle')) return 'üå¶Ô∏è';
  
  // Snow variations
  if(t.includes('snow') || t.includes('flurries')) return 'üå®Ô∏è';
  if(t.includes('sleet') || t.includes('wintry mix')) return 'üå®Ô∏è';
  
  // Fog and mist
  if(t.includes('fog') || t.includes('mist')) return 'üå´Ô∏è';
  
  // Wind
  if(t.includes('wind')) return 'üí®';
  
  // Cloud variations
  if(t.includes('partly cloudy') || t.includes('partly sunny')) return '‚õÖ';
  if(t.includes('mostly cloudy') || t.includes('cloudy')) return '‚òÅÔ∏è';
  if(t.includes('overcast')) return '‚òÅÔ∏è';
  
  // Clear/Sunny
  if(t.includes('sunny') || t.includes('clear')) return '‚òÄÔ∏è';
  if(t.includes('fair')) return 'üå§Ô∏è';
  
  // Default
  return 'üå§Ô∏è';
}

async function fetchWeather() {
  try {
    // Step 1: Get grid coordinates for ZIP 77055
    const pointRes = await fetch(`https://api.weather.gov/points/${LAT},${LON}`);
    const pointData = await pointRes.json();
    
    // Step 2: Get forecast from grid endpoint
    const forecastUrl = pointData.properties.forecast;
    const forecastRes = await fetch(forecastUrl);
    const forecastData = await forecastRes.json();
    
    const periods = forecastData.properties.periods;
    
    // Find today's periods (we want the current period)
    const now = periods[0];
    
    // Display current weather
    wxIcon.textContent = getWeatherEmoji(now.shortForecast);
    wxTemp.textContent = `${now.temperature}¬∞F`;
    wxCond.textContent = now.shortForecast;
    
    // Get high/low for today
    let todayHigh = now.temperature;
    let todayLow = now.temperature;
    
    // Check if next period is same day to get both high and low
    if(periods.length > 1) {
      const next = periods[1];
      if(now.isDaytime) {
        todayLow = next.temperature;
      } else {
        todayHigh = next.temperature;
      }
    }
    
    wxRange.textContent = `High ${todayHigh}¬∞ ‚Ä¢ Low ${todayLow}¬∞`;
    
    // Build 5-day forecast (skip today, show next 5 days)
    let html = "";
    const seenDays = new Set();
    let daysAdded = 0;
    
    for(let i = 2; i < periods.length && daysAdded < 5; i++) {
      const p = periods[i];
      const date = new Date(p.startTime);
      const dayKey = date.toDateString();
      
      // Only show daytime periods and unique days
      if(p.isDaytime && !seenDays.has(dayKey)) {
        seenDays.add(dayKey);
        
        // Get the night temp (next period after daytime)
        let lowTemp = p.temperature;
        if(i + 1 < periods.length) {
          lowTemp = periods[i + 1].temperature;
        }
        
        html += `<div class="dayCard">
          <div class="dow">${date.toLocaleDateString([], {weekday:'short'})}</div>
          <div class="dayIcon">${getWeatherEmoji(p.shortForecast)}</div>
          <div class="temps">${p.temperature}¬∞ / ${lowTemp}¬∞</div>
          <div class="smallCond">${p.shortForecast}</div>
        </div>`;
        
        daysAdded++;
      }
    }
    
    forecast.innerHTML = html;
    
  } catch(err) {
    console.error('Weather fetch error:', err);
    wxTemp.textContent = "--¬∞F";
    wxCond.textContent = "Unable to load weather";
    wxIcon.textContent = "üå§Ô∏è";
  }
}

fetchWeather();
// Refresh weather every 30 minutes
setInterval(fetchWeather, 30 * 60 * 1000);
</script>
</body>
</html>