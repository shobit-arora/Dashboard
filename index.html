<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Arora Family Calendar</title>

<!-- Reduce indexing (note: does NOT make the site private) -->
<meta name="robots" content="noindex,nofollow,noarchive,nosnippet,max-image-preview:none">
<meta name="googlebot" content="noindex,nofollow,noarchive,nosnippet,max-image-preview:none">

<!-- Warm-but-contemporary title font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,600;9..144,800&display=swap" rel="stylesheet">

<style>
html,body{
  margin:0; height:100%;
  background:#0b0f17; color:#fff;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
}
.wrap{
  height:100%;
  padding:16px;
  box-sizing:border-box;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.header{
  background:#111827;
  border-radius:16px;
  padding:14px 16px;
}
.titleRow{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:12px;
}
.title{
  text-align:center;
  font-size:30px;
  font-weight:800;
  font-family:"Fraunces", system-ui, -apple-system, Segoe UI, Roboto, Arial;
  letter-spacing:.2px;
}
.titleIcon{
  width:26px;
  height:26px;
  opacity:.95;
}
.dt{
  display:flex;
  justify-content:space-between;
  font-size:22px;
  font-weight:700;
  margin-top:6px;
}
.main{
  flex:1;
  display:grid;
  grid-template-columns:34% 66%;
  gap:12px;
  min-height:0;
}
.left,.right{min-height:0;}
.card{
  background:#111827;
  border-radius:16px;
  padding:12px;
  margin-bottom:12px;
}
.photoBox{
  height:260px;
  background:#000;
  border-radius:14px;
  overflow:hidden;
  position:relative;
}
.photoBox img{
  width:100%; height:100%;
  object-fit:cover;
}
.photoBox .fallbackNote{
  position:absolute;
  inset:auto 10px 10px 10px;
  font-size:12px;
  opacity:.75;
  background:rgba(0,0,0,.35);
  padding:6px 8px;
  border-radius:10px;
  display:none;
}
.calendar{
  height:100%;
  border-radius:16px;
  overflow:hidden;
}
.calendar iframe{
  width:100%; height:100%;
  border:0;
  filter:invert(1) hue-rotate(180deg) contrast(1.05);
}

/* Weather */
.wxNow{
  display:flex; align-items:center; gap:12px;
  margin-top:8px;
}
.wxIcon{ width:44px; height:44px; }
.wxTemp{ font-size:28px; font-weight:800; }
.wxCond{ font-size:14px; opacity:.85; }
.forecastRow{
  margin-top:10px;
  display:flex;
  gap:10px;
}
.dayCard{
  flex:1;
  background:#0f172a;
  border-radius:12px;
  padding:10px;
  display:flex;
  flex-direction:column;
  gap:6px;
  align-items:center;
  min-width:0;
}
.dayName{ font-weight:800; font-size:13px; opacity:.95; }
.dayIcon{ width:28px; height:28px; }
.dayTemps{ font-size:13px; opacity:.9; white-space:nowrap; }

/* Google Photos album embed */
.albumFrame{
  height:260px;
  border-radius:14px;
  overflow:hidden;
}
.pa-gallery-player-widget{
  width:100%;
  height:260px;
}
</style>

<!-- Google Photos "publicalbum" embed -->
<script src="https://cdn.jsdelivr.net/npm/publicalbum@latest/embed-ui.min.js" async></script>
</head>

<body>
<div class="wrap">

  <div class="header">
    <div class="titleRow">
      <div class="titleIcon" aria-hidden="true" id="ganeshIcon"></div>
      <div class="title">Arora Family Calendar</div>
      <div class="titleIcon" aria-hidden="true" id="omIcon"></div>
    </div>
    <div class="dt">
      <div id="time"></div>
      <div id="date"></div>
    </div>
  </div>

  <div class="main">
    <div class="left">

      <!-- Photos: prefer the full Google Photos album embed.
           If it fails to render (rare/CORS/network), we fall back to rotating URLs. -->
      <div class="card albumFrame" id="albumCard">
        <div class="pa-gallery-player-widget"
          data-link="https://photos.app.goo.gl/otWcjpGaxr4pREjc8"
          data-title="Niya and Jaiden Â· May 2, 2006â€‰â€“â€‰Jan 19, 2026 ðŸ“¸"
          data-description="Shared album Â· Tap to view!">
        </div>
      </div>

      <div class="card photoBox" id="fallbackPhotoCard" style="display:none;">
        <img id="photo" alt="Family photo">
        <div class="fallbackNote" id="fallbackNote">Album embed didnâ€™t load â€” showing fallback photos.</div>
      </div>

      <div class="card" id="weather">
        <strong>Houston Weather</strong>
        <div class="wxNow">
          <div id="wxIcon" class="wxIcon"></div>
          <div>
            <div class="wxTemp" id="wxTemp">--Â°F</div>
            <div class="wxCond" id="wxCond">Loadingâ€¦</div>
          </div>
        </div>
        <div class="forecastRow" id="forecast"></div>
      </div>
    </div>

    <div class="right calendar">
      <iframe
        src="https://calendar.google.com/calendar/embed?src=shashilandshobit%40gmail.com&ctz=America%2FChicago&mode=MONTH&showTitle=0&showTabs=0">
      </iframe>
    </div>
  </div>
</div>

<script>
/* CLOCK */
function tick(){
  const now=new Date();
  time.textContent=now.toLocaleTimeString([], {hour:'numeric',minute:'2-digit'});
  date.textContent=now.toLocaleDateString([], {weekday:'long',month:'short',day:'numeric'});
}
setInterval(tick,1000); tick();

/* SIMPLE INLINE SVG ICONS (clean outlines) */
function setSVG(el, svg){ document.getElementById(el).innerHTML = svg; }

setSVG("omIcon", `
<svg viewBox="0 0 64 64" fill="none" stroke="white" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round" aria-label="Om">
  <!-- Simplified Om-inspired outline (original drawing) -->
  <path d="M18 28c0-8 6-14 14-14s14 6 14 14c0 6-3 10-8 12"/>
  <path d="M20 42c2 6 8 10 16 10 10 0 18-7 18-16 0-7-4-12-11-13"/>
  <path d="M12 36c0 8 6 14 14 14"/>
  <path d="M44 14c3 0 6-3 6-6"/>
  <path d="M50 10c0 4 3 7 7 7"/>
</svg>
`);

setSVG("ganeshIcon", `
<svg viewBox="0 0 64 64" fill="none" stroke="white" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round" aria-label="Ganesha">
  <!-- Minimal, original Ganesha-inspired outline: head + trunk + ears -->
  <path d="M22 26c0-8 6-14 10-14s10 6 10 14"/>
  <path d="M18 30c-4 2-6 6-6 10 0 6 4 10 10 10"/>
  <path d="M46 30c4 2 6 6 6 10 0 6-4 10-10 10"/>
  <path d="M32 24c-4 4-6 9-6 14 0 8 6 14 14 14"/>
  <path d="M26 38c3 0 6-2 6-5"/>
  <path d="M40 41c-3 0-6-2-6-5"/>
</svg>
`);

/* === PHOTOS FALLBACK (kept small + stable) === */
const PHOTOS = [
  "https://lh3.googleusercontent.com/pw/AP1GczMFOZiZY5KWQ0C4v_fWvoR426w-Ng62oW-6FdufWtkhTlqdsuKafakw8HDu2JfsMkmyDEIGMGWuIvte0b6ug8CFRo_AKocvBkCCNGSeOt8Kru8PQBIe=w1920-h1080",
  "https://lh3.googleusercontent.com/pw/AP1GczPbpkO8cblmAmozt0Ltf9-Tuwdm9u_H-Qs1rcRaQMP5eZVz-PiIJvWhOtlw_UHkGbaVLMaoWR1UG4KhghxJtbhY-NgJ931Zl4ym9i6c70CPPbKWbelQ=w1920-h1080",
  "https://lh3.googleusercontent.com/pw/AP1GczOw8rp5nMwHPy5HLTFjjdrepp4VV_1pZM1NU4l0GqrnlTznFxodpK7_Y9qckJP_Ri7Ln7zUQxAFpp0RYED19Tmtu39AVwtPSFEyTeq2hsvHPykpiJLw=w1920-h1080",
  "https://lh3.googleusercontent.com/pw/AP1GczMRFjpACkHORYLnJJ9loz4pK6ylRWYE83dPZYiWXOo5SYwfhY3yqxJsX8kAeAGayUFatTK9aPaSehfW1sg98ajMryGtNhV3wVsjDDP6D1FD6MDqkz1h=w1920-h1080",
  "https://lh3.googleusercontent.com/pw/AP1GczMrtmdZ3RInAI5viTGOOdFbiBNqMmdP3eYr4ZQRvfhTqGn-x9xtYciFPKQlacNTaWeUmyZ_rntwYs5-fuQ_0uKmOzQDyYlPmoN0gdqpaXeTBZuhI8bP=w1920-h1080",
  "https://lh3.googleusercontent.com/pw/AP1GczN8AEHTVEkTNfOCc7WgMCFDQkqMyUGADwMdSz_Ks7SWCntJio0XG98ZJibZoTH3D6PBo639KSNSyw6j66SgYof5Pv6zYXDxrSZkY0YrMbZF_GoNqXVN=w1920-h1080"
];

let p=0;
const img=document.getElementById('photo');

function startFallbackPhotos(){
  document.getElementById('albumCard').style.display='none';
  document.getElementById('fallbackPhotoCard').style.display='block';
  document.getElementById('fallbackNote').style.display='block';

  function showNext(){
    const url=PHOTOS[p % PHOTOS.length];
    const pre=new Image();
    pre.onload=()=>img.src=url;
    pre.onerror=()=>{};
    pre.src=url;
    p++;
  }
  showNext();
  setInterval(showNext,8000);
}

/* If the album widget is still empty after a few seconds, use fallback photos */
setTimeout(()=>{
  const album=document.querySelector('.pa-gallery-player-widget');
  const hasContent = album && album.querySelector('img, iframe, video, canvas, .pa-image, .pa-gallery');
  if(!hasContent){ startFallbackPhotos(); }
}, 4500);

/* === WEATHER (SVG + Â°F) === */
function iconSVG(kind){
  const base = (paths)=>`<svg viewBox="0 0 64 64" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">${paths}</svg>`;
  switch(kind){
    case "sun": return base(`
      <circle cx="32" cy="32" r="10"/>
      <path d="M32 6v8M32 50v8M6 32h8M50 32h8M12 12l6 6M46 46l6 6M12 52l6-6M46 18l6-6"/>
    `);
    case "partly": return base(`
      <circle cx="22" cy="22" r="8"/>
      <path d="M22 6v6M22 32v6M6 22h6M32 22h6M11 11l4 4M29 29l4 4M11 33l4-4M29 15l4-4"/>
      <path d="M22 44h24a10 10 0 0 0 1.7-19.86A15 15 0 0 0 18.5 29 9 9 0 0 0 22 44Z"/>
    `);
    case "cloud": return base(`
      <path d="M18 46h28a12 12 0 0 0 2.1-23.8A18 18 0 0 0 14.5 30 10.5 10.5 0 0 0 18 46Z"/>
    `);
    case "fog": return base(`
      <path d="M18 34h28a12 12 0 0 0 2.1-23.8A18 18 0 0 0 14.5 18 10.5 10.5 0 0 0 18 34Z"/>
      <path d="M14 42h36M18 48h28M14 54h36"/>
    `);
    case "drizzle": return base(`
      <path d="M18 38h28a12 12 0 0 0 2.1-23.8A18 18 0 0 0 14.5 22 10.5 10.5 0 0 0 18 38Z"/>
      <path d="M22 44v4M32 44v4M42 44v4"/>
    `);
    case "rain": return base(`
      <path d="M18 36h28a12 12 0 0 0 2.1-23.8A18 18 0 0 0 14.5 20 10.5 10.5 0 0 0 18 36Z"/>
      <path d="M22 42l-2 6M32 42l-2 6M42 42l-2 6"/>
    `);
    case "sleet": return base(`
      <path d="M18 34h28a12 12 0 0 0 2.1-23.8A18 18 0 0 0 14.5 18 10.5 10.5 0 0 0 18 34Z"/>
      <path d="M24 40l-2 6M40 40l-2 6"/>
      <path d="M32 40v8M28.5 44.5l7 0M29.5 41.5l5 5M34.5 41.5l-5 5"/>
    `);
    case "snow": return base(`
      <path d="M18 34h28a12 12 0 0 0 2.1-23.8A18 18 0 0 0 14.5 18 10.5 10.5 0 0 0 18 34Z"/>
      <path d="M24 42v10M20 47h8M21.5 43.5l5 5M26.5 43.5l-5 5"/>
      <path d="M40 42v10M36 47h8M37.5 43.5l5 5M42.5 43.5l-5 5"/>
    `);
    case "hail": return base(`
      <path d="M18 32h28a12 12 0 0 0 2.1-23.8A18 18 0 0 0 14.5 16 10.5 10.5 0 0 0 18 32Z"/>
      <circle cx="24" cy="42" r="2"/><circle cx="32" cy="46" r="2"/><circle cx="40" cy="42" r="2"/>
      <circle cx="28" cy="52" r="2"/><circle cx="36" cy="52" r="2"/>
    `);
    case "storm": return base(`
      <path d="M18 34h28a12 12 0 0 0 2.1-23.8A18 18 0 0 0 14.5 18 10.5 10.5 0 0 0 18 34Z"/>
      <path d="M30 38l-6 10h8l-4 10 12-16h-8l4-4Z"/>
      <path d="M44 44l-2 6"/>
    `);
    case "windy": return base(`
      <path d="M14 28h26c6 0 8-8 2-10M14 38h34c7 0 9-9 2-12"/>
      <path d="M14 48h22c6 0 7-8 1-9"/>
    `);
    default: return "";
  }
}

function codeToKind(code){
  // Open-Meteo uses WMO weather codes: https://open-meteo.com/en/docs
  if(code===0) return ["sun","Clear"];
  if([1,2].includes(code)) return ["partly","Partly cloudy"];
  if(code===3) return ["cloud","Overcast"];
  if([45,48].includes(code)) return ["fog","Fog"];
  if([51,53,55].includes(code)) return ["drizzle","Drizzle"];
  if([56,57].includes(code)) return ["sleet","Freezing drizzle"];
  if([61,63,65].includes(code)) return ["rain","Rain"];
  if([66,67].includes(code)) return ["sleet","Freezing rain"];
  if([71,73,75,77,85,86].includes(code)) return ["snow","Snow"];
  if([80,81,82].includes(code)) return ["rain","Showers"];
  if(code===95) return ["storm","Thunderstorms"];
  if([96,99].includes(code)) return ["hail","Thunder + hail"];
  return ["cloud","Cloudy"];
}

function localDateFromISO(iso){
  // Avoid Date("YYYY-MM-DD") which is treated as UTC and can shift the day in local time.
  const [y,m,d]=iso.split("-").map(Number);
  return new Date(y, m-1, d);
}

fetch("https://api.open-meteo.com/v1/forecast?latitude=29.7604&longitude=-95.3698&current=temperature_2m,weather_code,wind_speed_10m&daily=weather_code,temperature_2m_max,temperature_2m_min&temperature_unit=fahrenheit&wind_speed_unit=mph&timezone=America/Chicago")
.then(r=>r.json())
.then(d=>{
  // Current conditions
  let [kind,label]=codeToKind(d.current.weather_code);
  const wind = d.current.wind_speed_10m ?? 0;
  if(wind >= 25 && [0,1,2,3].includes(d.current.weather_code)){
    kind="windy"; label=`Windy`;
  }

  wxTemp.textContent=Math.round(d.current.temperature_2m)+"Â°F";
  wxCond.textContent = wind >= 25 ? `${label} â€¢ ${Math.round(wind)} mph` : label;
  wxIcon.innerHTML = iconSVG(kind);

  // 5-day forecast: today + next 4
  let html="";
  for(let i=0;i<5;i++){
    const dt = localDateFromISO(d.daily.time[i]);
    const [k,l]=codeToKind(d.daily.weather_code[i]);
    html+=`<div class="dayCard">
      <div class="dow">${dt.toLocaleDateString([], {weekday:'short'})}</div>
      <div class="miniIcon">${iconSVG(k)}</div>
      <div class="temps">${Math.round(d.daily.temperature_2m_max[i])}Â° / ${Math.round(d.daily.temperature_2m_min[i])}Â°</div>
      <div class="smallCond">${l}</div>
    </div>`;
  }
  forecast.innerHTML=html;
});
</script>
</body>
</html>
