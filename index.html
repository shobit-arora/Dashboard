<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Arora Family Calendar</title>

<!-- Reduce indexing (note: does NOT make the site private) -->
<meta name="robots" content="noindex,nofollow,noarchive,nosnippet,max-image-preview:none">
<meta name="googlebot" content="noindex,nofollow,noarchive,nosnippet,max-image-preview:none">

<!-- Warm-but-contemporary title font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,600;9..144,800&display=swap" rel="stylesheet">

<style>
html,body{
  margin:0; height:100%;
  background:#0b0f17; color:#fff;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
}
.wrap{
  height:100%;
  padding:16px;
  box-sizing:border-box;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.header{
  background:#111827;
  border-radius:16px;
  padding:14px 16px;
}
.titleRow{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:12px;
}
.title{
  text-align:center;
  font-size:30px;
  font-weight:800;
  font-family:"Fraunces", system-ui, -apple-system, Segoe UI, Roboto, Arial;
  letter-spacing:.2px;
}
.titleIcon{
  width:40px;
  height:40px;
  opacity:.95;
}
.titleIcon img{
  width:100%;
  height:100%;
  object-fit:contain;
  filter:brightness(1.1);
}
.dt{
  display:flex;
  justify-content:space-between;
  font-size:22px;
  font-weight:700;
  margin-top:6px;
}
.main{
  flex:1;
  display:grid;
  grid-template-columns:34% 66%;
  gap:12px;
  min-height:0;
}
.left,.right{min-height:0;}
.card{
  background:#111827;
  border-radius:16px;
  padding:12px;
  margin-bottom:12px;
}
.photoBox{
  height:260px;
  background:#000;
  border-radius:14px;
  overflow:hidden;
  position:relative;
}
.photoBox img{
  width:100%; height:100%;
  object-fit:cover;
}
.calendar{
  height:100%;
  border-radius:16px;
  overflow:hidden;
}
.calendar iframe{
  width:100%; height:100%;
  border:0;
  filter:invert(1) hue-rotate(180deg) contrast(1.05);
}

/* Weather */
.wxNow{
  display:flex; align-items:center; gap:12px;
  margin-top:8px;
}
.wxIcon{ 
  width:44px; 
  height:44px;
}
.wxIcon svg{
  width:100%;
  height:100%;
  display:block;
}
.wxTemp{ font-size:28px; font-weight:800; }
.wxCond{ font-size:14px; opacity:.85; }
.forecastRow{
  margin-top:10px;
  display:flex;
  gap:10px;
}
.dayCard{
  flex:1;
  background:#0f172a;
  border-radius:12px;
  padding:10px;
  display:flex;
  flex-direction:column;
  gap:6px;
  align-items:center;
  min-width:0;
}
.dow{ font-weight:800; font-size:13px; opacity:.95; }
.miniIcon{ 
  width:28px; 
  height:28px;
}
.miniIcon svg{
  width:100%;
  height:100%;
  display:block;
}
.temps{ font-size:13px; opacity:.9; white-space:nowrap; }
.smallCond{ font-size:11px; opacity:.75; text-align:center; }
</style>
</head>

<body>
<div class="wrap">

  <div class="header">
    <div class="titleRow">
      <div class="titleIcon">
        <img src="Om 1.jpeg" alt="Om" id="omIconLeft">
      </div>
      <div class="title">Arora Family Calendar</div>
      <div class="titleIcon">
        <img src="Om 1.jpg" alt="Om" id="omIconRight">
      </div>
    </div>
    <div class="dt">
      <div id="time"></div>
      <div id="date"></div>
    </div>
  </div>

  <div class="main">
    <div class="left">

      <!-- Family Photo -->
      <div class="card photoBox">
        <img src="Family 1.jpg" alt="Arora Family" style="width:100%;height:100%;object-fit:cover;">
      </div>

      <div class="card" id="weather">
        <strong>Houston Weather - Today</strong>
        <div class="wxNow">
          <div id="wxIcon" class="wxIcon"></div>
          <div>
            <div class="wxTemp" id="wxTemp">--°F</div>
            <div class="wxCond" id="wxCond">Loading…</div>
            <div class="wxRange" id="wxRange" style="font-size:13px;opacity:.85;margin-top:4px;"></div>
          </div>
        </div>
        <div style="margin-top:12px;font-size:13px;font-weight:700;opacity:.9;">5-Day Forecast</div>
        <div class="forecastRow" id="forecast"></div>
      </div>
    </div>

    <div class="right calendar">
      <iframe
        src="https://calendar.google.com/calendar/embed?src=shashilandshobit%40gmail.com&ctz=America%2FChicago&mode=MONTH&showTitle=0&showTabs=0">
      </iframe>
    </div>
  </div>
</div>

<!-- Version timestamp -->
<div style="position:fixed;bottom:4px;right:8px;font-size:9px;opacity:.25;color:#666;">
  v2025-01-25 1:12 PM
</div>

<script>
/* CLOCK */
function tick(){
  const now=new Date();
  time.textContent=now.toLocaleTimeString([], {hour:'numeric',minute:'2-digit'});
  date.textContent=now.toLocaleDateString([], {weekday:'long',month:'short',day:'numeric'});
}
setInterval(tick,1000); tick();

/* === WEATHER (SVG + °F) === */
function iconSVG(kind){
  const base = (content, useStroke = true)=>`<svg viewBox="0 0 64 64" fill="none" ${useStroke ? 'stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"' : ''} xmlns="http://www.w3.org/2000/svg">${content}</svg>`;
  switch(kind){
    case "sun": return base(`
      <circle cx="32" cy="32" r="10"/>
      <line x1="32" y1="6" x2="32" y2="14"/>
      <line x1="32" y1="50" x2="32" y2="58"/>
      <line x1="6" y1="32" x2="14" y2="32"/>
      <line x1="50" y1="32" x2="58" y2="32"/>
      <line x1="12" y1="12" x2="18" y2="18"/>
      <line x1="46" y1="46" x2="52" y2="52"/>
      <line x1="12" y1="52" x2="18" y2="46"/>
      <line x1="46" y1="18" x2="52" y2="12"/>
    `);
    case "partly": return base(`
      <circle cx="22" cy="22" r="8"/>
      <line x1="22" y1="6" x2="22" y2="12"/>
      <line x1="22" y1="32" x2="22" y2="38"/>
      <line x1="6" y1="22" x2="12" y2="22"/>
      <line x1="32" y1="22" x2="38" y2="22"/>
      <line x1="11" y1="11" x2="15" y2="15"/>
      <line x1="29" y1="29" x2="33" y2="33"/>
      <line x1="11" y1="33" x2="15" y2="29"/>
      <line x1="29" y1="15" x2="33" y2="11"/>
      <path d="M22 44h24c5.5 0 10-4.5 10-10s-4.5-10-10-10c-1 0-2 .2-2.9.5C41.5 18.5 36 14 30 14c-7.2 0-13 5.8-13 13 0 .7.1 1.4.2 2C12.3 30.2 10 33.8 10 38c0 5.5 4.5 10 10 10h2"/>
    `);
    case "cloud": return `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><ellipse cx="32" cy="26" rx="14" ry="11" fill="white"/><ellipse cx="18" cy="33" rx="10" ry="9" fill="white"/><ellipse cx="46" cy="33" rx="10" ry="9" fill="white"/><rect x="8" y="28" width="48" height="12" fill="white"/></svg>`;
    case "fog": return base(`
      <path d="M18 34h28c6.6 0 12-5.4 12-12s-5.4-12-12-12c-1.2 0-2.4.2-3.5.6C40.8 4.6 34.8 0 28 0c-8.8 0-16 7.2-16 16 0 .8.1 1.6.2 2.4C6.8 20.2 4 24.8 4 30c0 6.6 5.4 12 12 12h2"/>
      <line x1="14" y1="42" x2="50" y2="42"/>
      <line x1="18" y1="48" x2="46" y2="48"/>
      <line x1="14" y1="54" x2="50" y2="54"/>
    `);
    case "drizzle": return base(`
      <path d="M18 38h28c6.6 0 12-5.4 12-12s-5.4-12-12-12c-1.2 0-2.4.2-3.5.6C40.8 8.6 34.8 4 28 4c-8.8 0-16 7.2-16 16 0 .8.1 1.6.2 2.4C6.8 24.2 4 28.8 4 34c0 6.6 5.4 12 12 12h2"/>
      <line x1="22" y1="44" x2="22" y2="48"/>
      <line x1="32" y1="44" x2="32" y2="48"/>
      <line x1="42" y1="44" x2="42" y2="48"/>
    `);
    case "rain": return base(`
      <path d="M18 36h28c6.6 0 12-5.4 12-12s-5.4-12-12-12c-1.2 0-2.4.2-3.5.6C40.8 6.6 34.8 2 28 2c-8.8 0-16 7.2-16 16 0 .8.1 1.6.2 2.4C6.8 22.2 4 26.8 4 32c0 6.6 5.4 12 12 12h2"/>
      <line x1="22" y1="42" x2="20" y2="48"/>
      <line x1="32" y1="42" x2="30" y2="48"/>
      <line x1="42" y1="42" x2="40" y2="48"/>
    `);
    case "sleet": return base(`
      <path d="M18 34h28c6.6 0 12-5.4 12-12s-5.4-12-12-12c-1.2 0-2.4.2-3.5.6C40.8 4.6 34.8 0 28 0c-8.8 0-16 7.2-16 16 0 .8.1 1.6.2 2.4C6.8 20.2 4 24.8 4 30c0 6.6 5.4 12 12 12h2"/>
      <line x1="24" y1="40" x2="22" y2="46"/>
      <line x1="40" y1="40" x2="38" y2="46"/>
      <line x1="32" y1="40" x2="32" y2="48"/>
      <line x1="28.5" y1="44.5" x2="35.5" y2="44.5"/>
      <line x1="29.5" y1="41.5" x2="34.5" y2="46.5"/>
      <line x1="34.5" y1="41.5" x2="29.5" y2="46.5"/>
    `);
    case "snow": return base(`
      <path d="M18 34h28c6.6 0 12-5.4 12-12s-5.4-12-12-12c-1.2 0-2.4.2-3.5.6C40.8 4.6 34.8 0 28 0c-8.8 0-16 7.2-16 16 0 .8.1 1.6.2 2.4C6.8 20.2 4 24.8 4 30c0 6.6 5.4 12 12 12h2"/>
      <line x1="24" y1="42" x2="24" y2="52"/>
      <line x1="20" y1="47" x2="28" y2="47"/>
      <line x1="21.5" y1="43.5" x2="26.5" y2="48.5"/>
      <line x1="26.5" y1="43.5" x2="21.5" y2="48.5"/>
      <line x1="40" y1="42" x2="40" y2="52"/>
      <line x1="36" y1="47" x2="44" y2="47"/>
      <line x1="37.5" y1="43.5" x2="42.5" y2="48.5"/>
      <line x1="42.5" y1="43.5" x2="37.5" y2="48.5"/>
    `);
    case "hail": return base(`
      <path d="M18 32h28c6.6 0 12-5.4 12-12s-5.4-12-12-12c-1.2 0-2.4.2-3.5.6C40.8 2.6 34.8-2 28-2c-8.8 0-16 7.2-16 16 0 .8.1 1.6.2 2.4C6.8 18.2 4 22.8 4 28c0 6.6 5.4 12 12 12h2"/>
      <circle cx="24" cy="42" r="2"/>
      <circle cx="32" cy="46" r="2"/>
      <circle cx="40" cy="42" r="2"/>
      <circle cx="28" cy="52" r="2"/>
      <circle cx="36" cy="52" r="2"/>
    `);
    case "storm": return base(`
      <path d="M18 34h28c6.6 0 12-5.4 12-12s-5.4-12-12-12c-1.2 0-2.4.2-3.5.6C40.8 4.6 34.8 0 28 0c-8.8 0-16 7.2-16 16 0 .8.1 1.6.2 2.4C6.8 20.2 4 24.8 4 30c0 6.6 5.4 12 12 12h2"/>
      <path d="M30 38l-6 10h8l-4 10 12-16h-8l4-4z"/>
      <line x1="44" y1="44" x2="42" y2="50"/>
    `);
    case "windy": return base(`
      <path d="M14 28h26c3 0 5-2 5-5s-2-5-5-5c-2.8 0-4.2 2-4 4"/>
      <path d="M14 38h34c3.9 0 7-3.1 7-7s-3.1-7-7-7c-3.8 0-6 3-6 6"/>
      <path d="M14 48h22c3 0 5-2 5-5s-2-4-4-4"/>
    `);
    default: return base(`<circle cx="32" cy="32" r="20"/>`);
  }
}

function codeToKind(code){
  // Open-Meteo uses WMO weather codes: https://open-meteo.com/en/docs
  if(code===0) return ["sun","Clear"];
  if([1,2].includes(code)) return ["partly","Partly cloudy"];
  if(code===3) return ["cloud","Overcast"];
  if([45,48].includes(code)) return ["fog","Fog"];
  if([51,53,55].includes(code)) return ["drizzle","Drizzle"];
  if([56,57].includes(code)) return ["sleet","Freezing drizzle"];
  if([61,63,65].includes(code)) return ["rain","Rain"];
  if([66,67].includes(code)) return ["sleet","Freezing rain"];
  if([71,73,75,77,85,86].includes(code)) return ["snow","Snow"];
  if([80,81,82].includes(code)) return ["rain","Showers"];
  if(code===95) return ["storm","Thunderstorms"];
  if([96,99].includes(code)) return ["hail","Thunder + hail"];
  return ["cloud","Cloudy"];
}

function localDateFromISO(iso){
  // Avoid Date("YYYY-MM-DD") which is treated as UTC and can shift the day in local time.
  const [y,m,d]=iso.split("-").map(Number);
  return new Date(y, m-1, d);
}

fetch("https://api.open-meteo.com/v1/forecast?latitude=29.7604&longitude=-95.3698&current=temperature_2m,weather_code,wind_speed_10m&daily=weather_code,temperature_2m_max,temperature_2m_min&temperature_unit=fahrenheit&wind_speed_unit=mph&timezone=America/Chicago")
.then(r=>r.json())
.then(d=>{
  // Current conditions - use TODAY'S data from daily forecast
  const todayCode = d.daily.weather_code[0];
  let [kind,label]=codeToKind(todayCode);
  const wind = d.current.wind_speed_10m ?? 0;
  if(wind >= 25 && [0,1,2,3].includes(todayCode)){
    kind="windy"; label=`Windy`;
  }

  wxTemp.textContent=Math.round(d.current.temperature_2m)+"°F";
  wxCond.textContent = wind >= 25 ? `${label} • ${Math.round(wind)} mph` : label;
  wxRange.textContent = `High ${Math.round(d.daily.temperature_2m_max[0])}° • Low ${Math.round(d.daily.temperature_2m_min[0])}°`;
  wxIcon.innerHTML = iconSVG(kind);

  // 5-day forecast: tomorrow through day 5 (skip today since it's shown above)
  let html="";
  for(let i=1;i<=5;i++){
    const dt = localDateFromISO(d.daily.time[i]);
    const [k,l]=codeToKind(d.daily.weather_code[i]);
    html+=`<div class="dayCard">
      <div class="dow">${dt.toLocaleDateString([], {weekday:'short'})}</div>
      <div class="miniIcon">${iconSVG(k)}</div>
      <div class="temps">${Math.round(d.daily.temperature_2m_max[i])}° / ${Math.round(d.daily.temperature_2m_min[i])}°</div>
      <div class="smallCond">${l}</div>
    </div>`;
  }
  forecast.innerHTML=html;
})
.catch(err=>{
  console.error('Weather fetch error:', err);
  wxTemp.textContent="--°F";
  wxCond.textContent="Unable to load weather";
});
</script>
</body>
</html>
